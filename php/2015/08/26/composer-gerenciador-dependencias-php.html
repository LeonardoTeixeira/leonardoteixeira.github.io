<!DOCTYPE html><html lang="pt-br"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Gerenciando dependências com o Composer do PHP</title><meta name="description" content="Instale, atualize e gerencie facilmente as bibliotecas do seu projeto utilizando o gerenciador de dependências Composer no PHP."><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"><link rel="canonical" href="http://localhost:4000/php/2015/08/26/composer-gerenciador-dependencias-php.html"><link rel="alternate" type="application/rss+xml" title="Blog do Leonardo Teixeira" href="feed.xml"><link rel="publisher" href="https://plus.google.com/111411156907213922073"><meta property="og:locale" content="pt_BR"><meta property="og:type" content="article"><meta property="og:title" content="Gerenciando dependências com o Composer do PHP"><meta property="og:description" content="Instale, atualize e gerencie facilmente as bibliotecas do seu projeto utilizando o gerenciador de dependências Composer no PHP."><meta property="og:url" content="http://localhost:4000/php/2015/08/26/composer-gerenciador-dependencias-php.html"><meta property="og:site_name" content="Blog do Leonardo Teixeira"><meta property="article:publisher" content="https://www.facebook.com/leonardocteixeira"><style>.icon>svg,img{vertical-align:middle}body,figure,h1,h2,h3,p,pre,ul{margin:0;padding:0}body{font:400 16px/1.5 "Helvetica Neue",Helvetica,Arial,sans-serif;color:#111;background-color:#fdfdfd;-webkit-text-size-adjust:100%;-webkit-font-feature-settings:"kern" 1;-moz-font-feature-settings:"kern" 1;-o-font-feature-settings:"kern" 1;font-feature-settings:"kern" 1;font-kerning:normal}.highlight,figure,h1,h2,h3,p,pre,ul{margin-bottom:15px}img{max-width:100%}ul{margin-left:30px}h1,h2,h3{font-weight:400}a{color:#2a7ae2;text-decoration:none}a:visited{color:#1756a9}a:hover{color:#111;text-decoration:underline}code,pre{font-size:15px;border:1px solid #e8e8e8;border-radius:3px;background-color:#eef}code{padding:1px 5px}pre{padding:8px 12px;overflow-x:auto}pre>code{border:0;padding-right:0;padding-left:0}.wrapper{max-width:-webkit-calc(800px - (30px * 2));max-width:calc(800px - (30px * 2));margin-right:auto;margin-left:auto;padding-right:30px;padding-left:30px}@media screen and (max-width:800px){.wrapper{max-width:-webkit-calc(800px - (30px));max-width:calc(800px - (30px));padding-right:15px;padding-left:15px}}.footer-col-wrapper:after,.wrapper:after{content:"";display:table;clear:both}.icon>svg{display:inline-block;width:16px;height:16px}.icon>svg path{fill:#828282}.site-header{border-top:5px solid #424242;border-bottom:1px solid #e8e8e8;min-height:56px;position:relative}.site-title{font-size:26px;font-weight:300;line-height:56px;letter-spacing:-1px;margin-bottom:0;float:left}.highlight .k,.highlight .kc,.highlight .kd,.highlight .kt,.highlight .nc,.highlight .nf,.highlight .o{font-weight:700}.site-title,.site-title:visited{color:#424242}.site-nav{float:right;line-height:56px}.site-nav .menu-icon{display:none}.site-nav .page-link{color:#111;line-height:1.5}.site-nav .page-link:not(:last-child){margin-right:20px}@media screen and (max-width:600px){.site-nav{position:absolute;top:9px;right:15px;background-color:#fdfdfd;border:1px solid #e8e8e8;border-radius:5px;text-align:right}.site-nav .menu-icon{display:block;float:right;width:36px;height:26px;line-height:0;padding-top:10px;text-align:center}.site-nav .menu-icon>svg{width:18px;height:15px}.site-nav .menu-icon>svg path{fill:#424242}.site-nav .trigger{clear:both;display:none}.site-nav:hover .trigger{display:block;padding-bottom:5px}.site-nav .page-link{display:block;padding:5px 10px;margin-left:20px}.site-nav .page-link:not(:last-child){margin-right:0}}.site-footer{border-top:1px solid #e8e8e8;padding:30px 0}.footer-heading{font-size:18px;margin-bottom:15px}.contact-list,.social-media-list{list-style:none;margin-left:0}.footer-col-wrapper{font-size:15px;color:#828282;margin-left:-15px}.footer-col{float:left;margin-bottom:15px;padding-left:15px}.post-content,.post-header,.post-list>li{margin-bottom:30px}.footer-col-1{width:-webkit-calc(35% - (30px / 2));width:calc(35% - (30px / 2))}.footer-col-2{width:-webkit-calc(20% - (30px / 2));width:calc(20% - (30px / 2))}.footer-col-3{width:-webkit-calc(45% - (30px / 2));width:calc(45% - (30px / 2))}@media screen and (max-width:800px){.footer-col-1,.footer-col-2{width:-webkit-calc(50% - (30px / 2));width:calc(50% - (30px / 2))}.footer-col-3{width:-webkit-calc(100% - (30px / 2));width:calc(100% - (30px / 2))}}@media screen and (max-width:600px){.footer-col{float:none;width:-webkit-calc(100% - (30px / 2));width:calc(100% - (30px / 2))}}.page-content{padding:30px 0}.page-heading{font-size:20px}.post-list{margin-left:0;list-style:none}.post-meta{font-size:14px;color:#828282}.post-link{display:block;font-size:24px}.post-title{font-size:42px;letter-spacing:-1px;line-height:1}@media screen and (max-width:800px){.post-title{font-size:36px}}.post-content h2{font-size:32px}@media screen and (max-width:800px){.post-content h2{font-size:28px}}.post-content h3{font-size:26px}@media screen and (max-width:800px){.post-content h3{font-size:22px}}.highlight{background:#fff}.highlight .kt{color:#458}.highlight .s{color:#d14}.highlight .na{color:teal}.highlight .nc{color:#458}.highlight .nf{color:#900}.highlight .nt{color:navy}</style><script>!function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-54292630-2","auto"),ga("send","pageview");</script></head><body><header class="site-header"><div class="wrapper"><a class="site-title" href="/">Blog do Leonardo Teixeira</a><nav class="site-nav"><a href="#" class="menu-icon"><svg viewBox="0 0 18 15"><path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/><path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/><path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/></svg></a><div class="trigger"><a class="page-link" href="/projetos/">Projetos</a> <a class="page-link" href="/leonardo-teixeira/">Sobre o Leonardo</a> <a class="page-link" href="/contato/">Contato</a></div></nav></div></header><div class="page-content"><div class="wrapper"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><h1 class="post-title" itemprop="name headline">Gerenciando dependências com o Composer do PHP</h1><p class="post-meta"><time datetime="2015-08-26T12:51:47-03:00" itemprop="datePublished">Aug 26, 2015</time></p></header><div class="post-content" itemprop="articleBody"><p><img src="/img/posts/composer-php.gif" alt="Composer PHP"></p><p>Neste artigo você irá aprender a trabalhar com o <strong>Composer</strong> do <strong>PHP</strong> e gerenciar de maneira rápida e simples todas as suas <strong>dependências</strong> de bibliotecas.</p><h2 id="o-que-é-composer">O que é Composer?</h2><p><a href="https://getcomposer.org/">Composer</a> é uma ferramenta de <strong>gerenciamento de dependências</strong> em <strong>PHP</strong>. Com ele você pode instalar e atualizar de maneira rápida e fácil todas as suas dependências, principalmente bibliotecas de terceiros.</p><h2 id="como-instalar-o-composer">Como instalar o Composer?</h2><p>Para instalar o <strong>Composer</strong> em seu projeto é muito simples, basta fazer o download do arquivo <code class="highlighter-rouge">composer.phar</code> no diretório do projeto.</p><p>Você pode fazer o download usando o comando CURL via linha de comando:</p><figure class="highlight"><pre><code class="language-plain" data-lang="plain">curl -sS https://getcomposer.org/installer | php</code></pre></figure><p>Se preferir, faça o download diretamente através <a href="https://getcomposer.org/composer.phar">deste link</a>.</p><h2 id="atualizando-o-composer">Atualizando o Composer</h2><p>Recomendo que você sempre se certifique que o Composer está atualizado em seu projeto antes de fazer a instalação das dependências.</p><p>Para atualizar o Composer, entre no diretório do seu projeto e rode o seguinte comando:</p><figure class="highlight"><pre><code class="language-plain" data-lang="plain">php composer.phar self-update</code></pre></figure><h2 id="definindo-as-dependências">Definindo as dependências</h2><p>Para definir as dependências de bibliotecas que deverão ser instaladas e gerenciadas pelo <strong>Composer</strong>, você deve criar um arquivo no formato <em>JSON</em> e com o nome <code class="highlighter-rouge">composer.json</code> na raíz do seu projeto.</p><p>Exemplo do arquivo <code class="highlighter-rouge">composer.json</code>:</p><figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nome do Projeto"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"require"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"php"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5.3.*"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"monolog/monolog"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.*"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"require-dev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"phpunit/phpunit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4.8.*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure><p>Note que neste arquivo <code class="highlighter-rouge">composer.json</code> existe uma chave <em>require</em> e outra <em>require-dev</em>. A chave <em>require-dev</em> é opcional e serve para você definir dependências que deverão ser instaladas apenas em ambiente de desenvolvimento, como por exemplo a biblioteca <a href="https://packagist.org/packages/phpunit/phpunit">PHPUnit</a>, utilizada para testes unitários.</p><h2 id="instalando-as-dependências">Instalando as dependências</h2><p>Agora que você já criou o arquivo <code class="highlighter-rouge">composer.json</code> na raíz do seu projeto, vamos instalar as dependências definidas nele.</p><p>Para instalar as dependências do <strong>Composer</strong> rode o seguinte comando:</p><blockquote><blockquote><p>php composer.phar install</p></blockquote></blockquote><p>Para instalar em ambiente de produção, use o comando:</p><blockquote><blockquote><p>php composer.phar install –no-dev –o</p></blockquote></blockquote><p>O comando acima (usando a flag <em>–no-dev</em>) não irá instalar as dependências definidas em <em>require-dev</em>, que devem ser usadas somente em ambiente de desenvolvimento. Já a flag <em>–o</em> irá otimizar o arquivo de <em>autoload</em> gerado pelo <strong>Composer</strong>.</p><h2 id="atualizando-as-dependências">Atualizando as dependências</h2><p>Sempre que você quiser atualizar as suas dependências , rode o seguinte comando:</p><blockquote><blockquote><p>php composer.phar update</p></blockquote></blockquote><p>Para ambiente de produção, rode:</p><blockquote><blockquote><p>php composer.phar update –no-dev –o</p></blockquote></blockquote><h2 id="usando-o-composer">Usando o Composer</h2><p>Finalmente iremos utilizar o <strong>Composer</strong>, para isso devemos incluir o <em>autoload</em> gerado por ele na pasta <code class="highlighter-rouge">vendor</code>.</p><figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="c1">// Aqui incluímos o autoload gerado pelo Composer
</span><span class="k">require</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">;</span>

<span class="c1">// Aqui usamos normalmente as bibliotecas que foram adicionadas como dependência no Composer
</span><span class="k">use</span> <span class="nx">Monolog\Logger</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Monolog\Handler\StreamHandler</span><span class="p">;</span>
<span class="nv">$log</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Logger</span><span class="p">(</span><span class="s1">'logs'</span><span class="p">);</span>
<span class="nv">$log</span><span class="o">-&gt;</span><span class="na">ushHandler</span><span class="p">(</span><span class="k">new</span> <span class="nx">StreamHandler</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/logs.log'</span><span class="p">,</span> <span class="nx">Logger</span><span class="o">::</span><span class="na">WARNING</span><span class="p">));</span>
<span class="nv">$log</span><span class="o">-&gt;</span><span class="na">addWarning</span><span class="p">(</span><span class="s1">'Criando um log warning...'</span><span class="p">);</span></code></pre></figure><p>Para maiores informações, acesse o site oficial do <strong>Composer</strong>: <a href="https://getcomposer.org/">https://getcomposer.org/</a></p></div><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="http://localhost:4000/php/2015/08/26/composer-gerenciador-dependencias-php.html",this.page.identifier="http://localhost:4000/php/2015/08/26/composer-gerenciador-dependencias-php.html"};!function(){var e=document,t=e.createElement("script");t.src="//blogleonardoteixeira.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script></article></div></div><footer class="site-footer"><div class="wrapper"><h2 class="footer-heading">Blog do Leonardo Teixeira</h2><div class="footer-col-wrapper"><div class="footer-col footer-col-1"><ul class="contact-list"><li>Blog do Leonardo Teixeira</li><li><a href="mailto:blog@leonardoteixeira.com.br">blog@leonardoteixeira.com.br</a></li></ul></div><div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/LeonardoTeixeira"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg> </span><span class="username">LeonardoTeixeira</span></a></li></ul></div><div class="footer-col footer-col-3"><p>Artigos sobre desenvolvimento e programação PHP, Node.js, Java, Android, AWS e tecnologia em geral.</p></div></div></div></footer></body></html>